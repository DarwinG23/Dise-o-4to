{% extends 'estudiante/estudianteInicio.html' %}

{% block content %}
<script>
    $(document).ready(function(){
        $("#ordenar").click(function(){
            create();
        });

        $("#valor").on("input", function(){
            var valor = $(this).val();
            if (valor === "") {
                create();
            } else {
                buscar();
            }
        });
    });

    function tabla(url){
        $.ajax({
            method: "GET",
            url: url,
            contentType: 'json',
            success: function(data){
                var html = '';
                if(data.code == '200'){
                    $.each(data.data, function(i, info){
                        html += "<tr>";
                        html += "<td>"+info.id+"</td>";
                        html += "<td>"+info.nombre+"</td>";
                        html += "<td>"+info.apellido+"</td>";
                        html += "<td>"+info.titulo+"</td>";
                        html += "</tr>";
                    });
                } else {
                    html = "<tr><td colspan='4' class='text-center'>No se encontraron datos</td></tr>";
                }
                $("#tabla tbody").html(html);
            }
        });
    }

    function create(){
        var select = $("#criterio").find(":selected").val();
        tabla("http://localhost:5000/docentes/ordenar/1/"+select+"/3");
    }

    function buscar(){
        var atributo = $("#criterio").find(":selected").val();
        var valor = $("#valor").val();
        tabla("http://localhost:5000/docentes/busqueda/1/"+valor+"/"+atributo);
    }
</script>

<div class="text-center">
    <h2 class="display-5">Gestión Docentes</h2>
</div>

<div class="card p-4">
    <div class="row mb-4 align-items-center">
        <div class="col-md-4 d-flex align-items-center">
            <label for="criterio" class="me-2">Criterio:</label>
            <select id="criterio" class="form-select w-auto">
                <option value="_nombre">Nombre</option>
                <option value="_apellido">Apellido</option>
                <option value="_titulo">Título</option>
            </select>
        </div>
        <div class="col-md-4 text-end">
            <button class="btn btn-info w-100" id="ordenar">ORDENAR</button>
        </div>
        <div class="col-md-4 d-flex">
            <input type="text" id="valor" class="form-control me-2" placeholder="Buscar...">
            <button class="btn btn-info" id="buscar">BUSCAR</button>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col-md-6">
            <a  href="/administrador/crearDocente/ver/{{roles}}/{{nombreU}}/{{apellidoU}}"  class="btn btn-success w-100">Crear</a>
        </div>
    </div>
</div>

<table id="tabla" class="table text-black table-striped table-hover table-bordered">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Apellido</th>
            <th>Título</th>
        </tr>
    </thead>
    <tbody>
        {% for item in lista %}
            <tr>
                <td>{{ item.nombre }}</td>
                <td>{{ item.apellido }}</td>
                <td>{{ item.titulo }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table>

<style>
    body {
        font-family: Arial, sans-serif;
        background-color: #f8f9fa;
    }

    .display-5 {
        font-size: 2.5rem;
        font-weight: 300;
    }

    .table {
        margin-top: 20px;
        width: 100%;
    }

    .card {
        background-color: #ffffff;
        border-radius: 0.25rem;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    }

    .btn-warning {
        background-color: #ffc107;
        border-color: #ffc107;
        color: black;
    }
    .btn-warning:hover {
        background-color: #e0a800;
    }

    .btn-success {
        background-color: #28a745;
        border-color: #28a745;
    }
    .btn-success:hover {
        background-color: #218838;
    }

    .btn-info {
        background-color: #17a2b8;
        border-color: #17a2b8;
    }
    .btn-info:hover {
        background-color: #138496;
    }

    .table th {
        background-color: #343a40;
        color: #ffffff;
    }
</style>
{% endblock %}
